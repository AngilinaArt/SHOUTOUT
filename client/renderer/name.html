<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';" />
    <title>Name ändern</title>
    <style>
      body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: #0f172a; color: #e5e7eb; }
      .wrap { padding: 16px; }
      .label { font-size: 12px; color: #94a3b8; margin-bottom: 6px; }
      input { width: 100%; padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(148,163,184,0.25); background: rgba(255,255,255,0.06); color: #e5e7eb; }
      .hint { font-size: 12px; color: #94a3b8; margin-top: 6px; }
      .actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 12px; }
      button { border: 0; border-radius: 10px; padding: 8px 12px; cursor: pointer; }
      .btn-secondary { background: rgba(255,255,255,0.08); color: #e5e7eb; }
      .btn-primary { background: #2563eb; color: #fff; }
      .btn-primary:disabled { opacity: .5; cursor: not-allowed; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="label">Dein Anzeigename (2–24 Zeichen)</div>
      <input id="name" maxlength="24" placeholder="z. B. Ederino" />
      <div class="hint">Wird bei Hamster/Toast als Absender angezeigt.</div>
      <div class="actions">
        <button class="btn-secondary" id="cancel">Abbrechen</button>
        <button class="btn-primary" id="save" disabled>Speichern</button>
      </div>
    </div>
    <script>
      const nameEl = document.getElementById('name');
      const saveBtn = document.getElementById('save');
      const cancelBtn = document.getElementById('cancel');
      function normalize(v){ return v.replace(/\s+/g,' ').trim(); }
      function validate(){ const v = normalize(nameEl.value); saveBtn.disabled = (v.length < 2 || v.length > 24); }
      nameEl.addEventListener('input', validate);
      nameEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter' && !saveBtn.disabled){ saveBtn.click(); } });
      saveBtn.addEventListener('click', ()=>{ window.namePrompt.submit({ name: normalize(nameEl.value) }); });
      cancelBtn.addEventListener('click', ()=> window.namePrompt.cancel());
      validate(); nameEl.focus();
    </script>
  </body>
  </html>


